!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@popetech/ngx-table",["exports","@angular/core","@angular/common","@angular/forms","rxjs","rxjs/operators"],e):e(((t=t||self).popetech=t.popetech||{},t.popetech["ngx-table"]={}),t.ng.core,t.ng.common,t.ng.forms,t.rxjs,t.rxjs.operators)}(this,(function(t,e,n,o,i,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,o){var i,a=arguments.length,l=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(l=(a<3?i(l):a>3?i(e,n,l):i(e,n))||l);return a>3&&l&&Object.defineProperty(e,n,l),l}function r(t,e){return function(n,o){e(n,o,t)}}function c(t){return null==t}var p=function(){function t(t,e){this._elementRef=t,this.renderer=e,this._prevCondition=!1}return Object.defineProperty(t.prototype,"hide",{set:function(t){this.initDisplayStyle(),!t||!c(this._prevCondition)&&this._prevCondition?t||!c(this._prevCondition)&&!this._prevCondition||(this._prevCondition=!1,this.renderer.setStyle(this._elementRef.nativeElement,"display",this._displayStyle)):(this._prevCondition=!0,this.renderer.setStyle(this._elementRef.nativeElement,"display","none"))},enumerable:!0,configurable:!0}),t.prototype.initDisplayStyle=function(){if(void 0===this._displayStyle){var t=this._elementRef.nativeElement.style.display;"none"!==t&&(this._displayStyle=t)}},t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},s([e.Input()],t.prototype,"hide",null),t=s([e.Directive({selector:"[hide]"})],t)}(),d=function(){function t(){}return t.prototype.transform=function(t,e){return Math.min.apply(null,t)},t=s([e.Pipe({name:"min"})],t)}(),u=function(){function t(){}return t.prototype.transform=function(t,e){if(void 0===e&&(e=[]),void 0!==t)return"string"==typeof t?t:"number"==typeof t?t+"px":void 0},t=s([e.Pipe({name:"px"})],t)}(),m=function(){function t(t){this.items=t}return t.prototype.query=function(t,e){var n=[];return n=e?this.items.filter(e):this.items.slice(),t.sortBy&&(n.sort((function(e,n){return"string"==typeof e[t.sortBy]?e[t.sortBy].localeCompare(n[t.sortBy]):e[t.sortBy]-n[t.sortBy]})),!1===t.sortAsc&&n.reverse()),void 0!==t.offset&&(n=void 0===t.limit?n.slice(t.offset,n.length):n.slice(t.offset,t.offset+t.limit)),new Promise((function(t,e){setTimeout((function(){return t(n)}))}))},t.prototype.count=function(){var t=this;return new Promise((function(e,n){setTimeout((function(){return e(t.items.length)}))}))},t}(),h=function(){function t(){this.styleClassObject={},this.sortable=!1,this.resizable=!1,this.visible=!0}return t.prototype.getCellColor=function(t,e){if(void 0!==this.cellColors)return this.cellColors(t.item,t,this,e)},t.prototype.ngOnInit=function(){this._initCellClass()},t.prototype._initCellClass=function(){var t;!this.styleClass&&this.property&&(/^[a-zA-Z0-9_]+$/.test(this.property)?this.styleClass="column-"+this.property:this.styleClass="column-"+this.property.replace(/[^a-zA-Z0-9_]/g,"")),null!=this.styleClass&&(this.styleClassObject=((t={})[this.styleClass]=!0,t))},s([e.Input()],t.prototype,"header",void 0),s([e.Input()],t.prototype,"sortable",void 0),s([e.Input()],t.prototype,"resizable",void 0),s([e.Input()],t.prototype,"property",void 0),s([e.Input()],t.prototype,"styleClass",void 0),s([e.Input()],t.prototype,"cellColors",void 0),s([e.Input()],t.prototype,"width",void 0),s([e.Input()],t.prototype,"visible",void 0),s([e.ContentChild("dataTableCell",{static:!0})],t.prototype,"cellTemplate",void 0),s([e.ContentChild("dataTableHeader",{static:!0})],t.prototype,"headerTemplate",void 0),t=s([e.Directive({selector:"data-table-column"})],t)}(),b=function(){function t(t,n,o){this.dataTable=t,this.renderer=n,this.elementRef=o,this._this=this,this._listeners=[],this.selectedChange=new e.EventEmitter}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.selectedChange.emit(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayIndex",{get:function(){return this.dataTable.pagination?this.dataTable.displayParams.offset+this.index+1:this.index+1},enumerable:!0,configurable:!0}),t.prototype.getTooltip=function(){return this.dataTable.rowTooltip?this.dataTable.rowTooltip(this.item,this,this.index):""},t.prototype.ngOnInit=function(){var t=this;this.dataTable.rowClick.observers.length>0&&this._listeners.push(this.renderer.listen(this.elementRef.nativeElement,"click",(function(e){return t.dataTable.rowClicked(t,e)}))),this.dataTable.rowDoubleClick.observers.length>0&&this._listeners.push(this.renderer.listen(this.elementRef.nativeElement,"dblclick",(function(e){return t.dataTable.rowDoubleClicked(t,e)})))},t.prototype.ngOnDestroy=function(){this.selected=!1,this._listeners.forEach((function(t){return t()}))},t.ctorParameters=function(){return[{type:y,decorators:[{type:e.Inject,args:[e.forwardRef((function(){return y}))]}]},{type:e.Renderer2},{type:e.ElementRef}]},s([e.Input()],t.prototype,"item",void 0),s([e.Input()],t.prototype,"index",void 0),s([e.Output()],t.prototype,"selectedChange",void 0),t=s([e.Component({selector:"[dataTableRow]",template:'<tr class="data-table-row"\n    [title]="getTooltip()"\n    [style.background-color]="dataTable.getRowColor(item, index, _this)"\n    [class.row-odd]="index % 2 === 0"\n    [class.row-even]="index % 2 === 1"\n    [class.selected]="selected"\n    [class.clickable]="dataTable.selectOnRowClick">\n  <td [hide]="!dataTable.expandColumnVisible">\n    <button (click)="expanded = !expanded; $event.stopPropagation()" class="row-expand-button"\n         [attr.aria-expanded]="expanded"\n         [title]="dataTable.labels.expandRow.replace(\'{cell_content}\', \'\'+item[dataTable.primaryColumn])"\n         [attr.aria-label]="dataTable.labels.expandRow.replace(\'{cell_content}\', \'\'+item[dataTable.primaryColumn])">\n      <i [ngClass]="{\'fa-caret-right\': !expanded, \'fa-caret-down\': expanded}" class="fa fa-lg" aria-hidden="true"></i>\n    </button>\n  </td>\n  <td [hide]="!dataTable.indexColumnVisible" class="index-column" [textContent]="displayIndex"></td>\n  <td [hide]="!dataTable.selectColumnVisible" class="select-column">\n    <input\n           type="checkbox" [(ngModel)]="selected"\n           [title]="dataTable.labels.selectRow.replace(\'{cell_content}\', \'\'+item[dataTable.primaryColumn])"\n           [attr.aria-label]="dataTable.labels.selectRow.replace(\'{cell_content}\', \'\'+item[dataTable.primaryColumn])"/>\n  </td>\n  <ng-template ngFor [ngForOf]="dataTable.columns" let-column>\n    <th *ngIf="dataTable.primaryColumn === column.property" scope="row" [hide]="!column.visible" [ngClass]="column.styleClassObject"\n        class="data-column"\n        [style.background-color]="column.getCellColor(_this, index)">\n      <div *ngIf="!column.cellTemplate" [textContent]="item[column.property]"></div>\n      <div *ngIf="column.cellTemplate" [ngTemplateOutlet]="column.cellTemplate"\n           [ngTemplateOutletContext]="{column: column, row: _this, item: item}"></div>\n    </th>\n    <td *ngIf="dataTable.primaryColumn !== column.property" [hide]="!column.visible" [ngClass]="column.styleClassObject"\n        class="data-column"\n        [style.background-color]="column.getCellColor(_this, index)">\n      <div *ngIf="!column.cellTemplate" [textContent]="item[column.property]"></div>\n      <div *ngIf="column.cellTemplate" [ngTemplateOutlet]="column.cellTemplate"\n           [ngTemplateOutletContext]="{column: column, row: _this, item: item}"></div>\n    </td>\n  </ng-template>\n</tr>\n<tr *ngIf="dataTable.expandableRows" [hide]="!expanded" class="row-expansion">\n  <td [attr.colspan]="dataTable.columnCount">\n    <div [ngTemplateOutlet]="dataTable.expandTemplate" [ngTemplateOutletContext]="{row: _this, item: item}"></div>\n  </td>\n</tr>\n',styles:[".select-column{text-align:center}.row-expand-button{box-sizing:content-box;background:0 0;border:0;color:inherit;cursor:pointer;font:inherit;line-height:normal;overflow:visible;padding:.15rem .75rem;-webkit-appearance:button;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.clickable{cursor:pointer}th{font-weight:initial}"]}),r(0,e.Inject(e.forwardRef((function(){return y}))))],t)}(),f={headerReload:"reload {title} table",headerColumnSelector:"column selector - adds or removes columns from {title} table",headerColumnSelectorAdded:"{column_name} added to {title} table",headerColumnSelectorRemoved:"{column_name} removed from {title} table",indexColumn:"index",selectColumn:"select",selectRow:"select {cell_content}",selectAllRows:"select all rows",expandColumn:"expand",expandRow:"expand {cell_content}",sortedAscending:"{title} table sorted by {header} ascending",sortedDescending:"{title} table sorted by {header} descending",sortAscending:"activate to sort ascending",sortDescending:"activate to sort descending",paginationLimit:"Limit",paginationText:"Results: {from} to {to} of {total}",paginationTotalPages:"of",firstPage:"first page",prevPage:"previous page",pageNumberLabel:"Page",pageNumber:"page number",pageNumberNofM:"({N} of {M})",nextPage:"next page",lastPage:"last page",loadingText:"{title} table is loading",loadedText:"{title} table loaded"};var g=0,y=function(){function t(){this._items=[],this.title="",this.showTitle=!0,this.header=!0,this.pagination=!0,this.indexColumn=!0,this.indexColumnHeader="",this.selectColumn=!1,this.multiSelect=!0,this.substituteRows=!0,this.expandableRows=!1,this.selectOnRowClick=!1,this.autoReload=!0,this.showReloading=!1,this.pageLimits=[10,25,50,100,250],this.primaryColumn="",this.reload=new e.EventEmitter,this.rowClick=new e.EventEmitter,this.rowDoubleClick=new e.EventEmitter,this.headerClick=new e.EventEmitter,this.cellClick=new e.EventEmitter,this.selectedRowsChange=new e.EventEmitter,this.visibleColumnsChange=new e.EventEmitter,this._displayParams={},this.subject=new i.Subject,this.notifier=new i.Subject,this.selectedRows=[],this.id="datatable-"+g++,this._selectAllCheckbox=!1,this._resizeInProgress=!1,this.resizeLimit=30,this._reloading=!1,this._sortAsc=!0,this._offset=0,this._limit=10}return Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,this._onReloadFinished()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemCount",{get:function(){return this._itemCount},set:function(t){this._itemCount=t,this.notifier.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reloading",{get:function(){return this._reloading},set:function(t){this._reloading=t,this.notifier.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortBy",{get:function(){return this._sortBy},set:function(t){this._sortBy=t,this.subject.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortAsc",{get:function(){return this._sortAsc},set:function(t){this._sortAsc=t,this.subject.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t,this.subject.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit=t,this.subject.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return 0!==this.itemCount?Math.floor(this.offset/this.limit)+1:0},set:function(t){this.offset=(t-1)*this.limit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastPage",{get:function(){return Math.ceil(this.itemCount/this.limit)},enumerable:!0,configurable:!0}),t.prototype.sort=function(t,e){this.sortBy=t,this.sortAsc=e},t.prototype.ngOnInit=function(){var t=this;this._initDefaultValues(),this._initDefaultClickEvents(),this._updateDisplayParams(),this.pageLimits.indexOf(this.limit)<0&&(this.limit=this.pageLimits[0]),this.labels=l(l({},f),this.labels),this.autoReload&&this.reloadItems(),this.notifier$=this.notifier.subscribe((function(){return t._notify()})),this.subject$=this.subject.pipe(a.debounceTime(100)).subscribe((function(){return t.reloadItems()}))},t.prototype._initDefaultValues=function(){this.indexColumnVisible=this.indexColumn,this.selectColumnVisible=this.selectColumn,this.expandColumnVisible=this.expandableRows},t.prototype._initDefaultClickEvents=function(){var t=this;this.headerClick.subscribe((function(e){return t.sortColumn(e.column)})),this.selectOnRowClick&&this.rowClick.subscribe((function(t){return t.row.selected=!t.row.selected}))},t.prototype.reloadItems=function(){this.reloading=!0,this.reload.emit(this._getRemoteParameters())},t.prototype._onReloadFinished=function(){this.reloading&&(this._updateDisplayParams(),this._selectAllCheckbox=!1,this.reloading=!1)},Object.defineProperty(t.prototype,"displayParams",{get:function(){return this._displayParams},enumerable:!0,configurable:!0}),t.prototype._updateDisplayParams=function(){this._displayParams={sortBy:this.sortBy,sortAsc:this.sortAsc,offset:this.offset,limit:this.limit}},t.prototype.rowClicked=function(t,e){this.rowClick.emit({row:t,event:e})},t.prototype.rowDoubleClicked=function(t,e){this.rowDoubleClick.emit({row:t,event:e})},t.prototype.headerClicked=function(t,e){this._resizeInProgress?this._resizeInProgress=!1:(e.preventDefault(),e.stopPropagation(),this.headerClick.emit({column:t,event:e}))},t.prototype.cellClicked=function(t,e,n){this.cellClick.emit({row:e,column:t,event:n})},t.prototype._getRemoteParameters=function(){var t={};return this.sortBy&&(t.sortBy=this.sortBy,t.sortAsc=this.sortAsc),this.pagination&&(t.offset=this.offset,t.limit=this.limit),t},t.prototype.sortColumn=function(t){if(t.sortable){var e=this.sortBy!==t.property||!this.sortAsc;if(t.property===this.sortBy&&!this.sortAsc)return void this.sort(void 0,!0);this.sort(t.property,e)}},Object.defineProperty(t.prototype,"columnCount",{get:function(){var t=0;return t+=this.indexColumnVisible?1:0,t+=this.selectColumnVisible?1:0,t+=this.expandColumnVisible?1:0,this.columns.toArray().forEach((function(e){t+=e.visible?1:0})),t},enumerable:!0,configurable:!0}),t.prototype.getRowColor=function(t,e,n){if(void 0!==this.rowColors)return this.rowColors(t,n,e)},Object.defineProperty(t.prototype,"selectAllCheckbox",{get:function(){return this._selectAllCheckbox},set:function(t){this._selectAllCheckbox=t,this._onSelectAllChanged(t)},enumerable:!0,configurable:!0}),t.prototype._onSelectAllChanged=function(t){this.rows.toArray().forEach((function(e){return e.selected=t})),this.selectedRowsChange.emit(this.selectedRows)},t.prototype.onRowSelectChanged=function(t){if(this.multiSelect){var e=this.selectedRows.indexOf(t);t.selected&&e<0?this.selectedRows.push(t):!t.selected&&e>=0&&this.selectedRows.splice(e,1)}else t.selected?this.selectedRow=t:this.selectedRow===t&&delete this.selectedRow;t.selected&&!this.multiSelect&&this.rows.toArray().filter((function(t){return t.selected})).forEach((function(e){e!==t&&(e.selected=!1)})),this.selectedRowsChange.emit(this.selectedRows)},Object.defineProperty(t.prototype,"substituteItems",{get:function(){return Array.from({length:this.displayParams.limit-this.items.length})},enumerable:!0,configurable:!0}),t.prototype.resizeColumnStart=function(t,e,n){var o=this;this._resizeInProgress=!0;var i=n.offsetWidth-t.pageX;!function(t,e){var n=e.move,o=e.up,i=t.pageX,a=t.pageY,l=i,s=a,r=!1;function c(e){var o=e.pageX-l,i=e.pageY-s;l=e.pageX,s=e.pageY,(o||i)&&(r=!0),n(e,o,i,l,s),t.preventDefault()}document.addEventListener("mousemove",c),document.addEventListener("mouseup",(function e(n){l=n.pageX,s=n.pageY,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e),o&&o(t,l,s,r)}))}(t,{move:function(t,a){o._isResizeInLimit(n,a)&&(e.width=i+t.pageX+a)}})},t.prototype._isResizeInLimit=function(t,e){return!(e<0&&t.offsetWidth+e<=this.resizeLimit||!t.nextElementSibling||e>=0&&t.nextElementSibling.offsetWidth+e<=this.resizeLimit)},t.prototype.ngAfterContentInit=function(){""===this.primaryColumn&&(this.primaryColumn=this.columns.first.property)},t.prototype._notify=function(){var t=this,e=this.reloading;if(this.reloadNotification=e?this.labels.loadingText.replace("{title}",this.title):this.labels.loadedText.replace("{title}",this.title),!e)if(this.pagination?this.paginationNotification=this.labels.paginationText.replace("{from}",""+(0!==Math.ceil(this.itemCount/this.limit)?this.offset+1:"0")).replace("{to}",""+Math.min(this.offset+this.limit,this.itemCount)).replace("{total}",""+this.itemCount):this.paginationNotification="",void 0!==this.columns&&void 0!==this.sortBy){var n=this.columns.toArray().find((function(e){return e.property===t.sortBy}));this.sortNotification=(this.sortAsc?this.labels.sortedAscending:this.labels.sortedDescending).replace("{title}",this.title).replace("{header}",n.header)}else this.sortNotification=""},t.prototype.ngOnDestroy=function(){this.subject$.unsubscribe(),this.notifier$.unsubscribe()},s([e.Input()],t.prototype,"wrapperClass",void 0),s([e.Input()],t.prototype,"items",null),s([e.Input()],t.prototype,"itemCount",null),s([e.ContentChildren(h)],t.prototype,"columns",void 0),s([e.ViewChildren(b)],t.prototype,"rows",void 0),s([e.ContentChild("dataTableExpand",{static:!0})],t.prototype,"expandTemplate",void 0),s([e.Input()],t.prototype,"title",void 0),s([e.Input()],t.prototype,"showTitle",void 0),s([e.Input()],t.prototype,"header",void 0),s([e.Input()],t.prototype,"pagination",void 0),s([e.Input()],t.prototype,"indexColumn",void 0),s([e.Input()],t.prototype,"indexColumnHeader",void 0),s([e.Input()],t.prototype,"rowColors",void 0),s([e.Input()],t.prototype,"rowTooltip",void 0),s([e.Input()],t.prototype,"selectColumn",void 0),s([e.Input()],t.prototype,"multiSelect",void 0),s([e.Input()],t.prototype,"substituteRows",void 0),s([e.Input()],t.prototype,"expandableRows",void 0),s([e.Input()],t.prototype,"labels",void 0),s([e.Input()],t.prototype,"selectOnRowClick",void 0),s([e.Input()],t.prototype,"autoReload",void 0),s([e.Input()],t.prototype,"showReloading",void 0),s([e.Input()],t.prototype,"noDataMessage",void 0),s([e.Input()],t.prototype,"pageLimits",void 0),s([e.Input()],t.prototype,"primaryColumn",void 0),s([e.Output()],t.prototype,"reload",void 0),s([e.Output()],t.prototype,"rowClick",void 0),s([e.Output()],t.prototype,"rowDoubleClick",void 0),s([e.Output()],t.prototype,"headerClick",void 0),s([e.Output()],t.prototype,"cellClick",void 0),s([e.Output()],t.prototype,"selectedRowsChange",void 0),s([e.Output()],t.prototype,"visibleColumnsChange",void 0),s([e.Input()],t.prototype,"sortBy",null),s([e.Input()],t.prototype,"sortAsc",null),s([e.Input()],t.prototype,"offset",null),s([e.Input()],t.prototype,"limit",null),s([e.Input()],t.prototype,"page",null),t=s([e.Component({selector:"data-table",template:'<div class="data-table-wrapper">\n  <span class="sr-only" role="status" aria-live="polite" aria-atomic="false" aria-relevant="text">\n    <span [textContent]="reloadNotification"></span>\n    <span [textContent]="paginationNotification"></span>\n    <span [textContent]="sortNotification"></span>\n    <span [textContent]="columnSelectorNotification"></span>\n  </span>\n\n  <data-table-header *ngIf="header"></data-table-header>\n\n  <div class="data-table-box" [class]="wrapperClass">\n    <table class="table data-table" [id]="id">\n      <caption class="sr-only" [textContent]="title"></caption>\n      <thead>\n      <tr>\n        <td [hide]="!expandColumnVisible" class="expand-column-header">\n        </td>\n        <th scope="col" [hide]="!indexColumnVisible" class="index-column-header">\n          <span [textContent]="indexColumnHeader"></span>\n        </th>\n        <td [hide]="!selectColumnVisible" class="select-column-header">\n          <label [for]="id + \'-select-all-column\'" class="sr-only">\n            {{ labels.selectAllRows }}\n          </label>\n          <input\n            [id]="id + \'-select-all-column\'"\n            [hide]="!multiSelect"\n                 type="checkbox"\n                 [(ngModel)]="selectAllCheckbox"\n                 [disabled]="itemCount === 0"\n                 [title]="labels.selectAllRows"/>\n        </td>\n        <th *ngFor="let column of columns, index as i" #th\n            [hide]="!column.visible"\n            [class.sortable]="column.sortable"\n            [class.resizable]="column.resizable"\n            scope="col"\n            [attr.aria-sort]="column.sortable ? (column.property === sortBy ? (sortAsc ? \'ascending\' : \'descending\') : \'none\') : null"\n            [ngClass]="column.styleClassObject" class="column-header" [style.width]="column.width | px" >\n          <button *ngIf="column.sortable" (click)="headerClicked(column, $event)"\n                  [attr.aria-controls]="column.sortable ? id : null"\n                  [disabled]="itemCount === 0"\n                  [attr.aria-labelledby]="\'col-\'+id+\'-\'+i"\n                  [title]="!sortAsc ? labels.sortAscending : labels.sortDescending">\n            <span *ngIf="!column.headerTemplate" [id]="\'col-\'+id+\'-\'+i"\n                  [textContent]="column.header"></span>\n            <span *ngIf="column.headerTemplate" [ngTemplateOutlet]="column.headerTemplate"\n                  [ngTemplateOutletContext]="{column: column}"></span>\n            <span class="column-sort-icon" *ngIf="column.sortable">\n              <i [hide]="column.property === sortBy" class="fa fa-sort column-sortable-icon"\n                aria-hidden="true"></i>\n              <i [hide]="column.property !== sortBy" class="fa"\n                [ngClass]="{\'fa-sort-asc\': sortAsc, \'fa-sort-desc\': !sortAsc}" aria-hidden="true"></i>\n            </span>\n            <span *ngIf="column.resizable" class="column-resize-handle"\n                  (mousedown)="resizeColumnStart($event, column, th)"></span>\n          </button>\n          <span *ngIf="!column.sortable">\n            <span *ngIf="!column.headerTemplate"\n                  [textContent]="column.header"></span>\n            <span *ngIf="column.headerTemplate" [ngTemplateOutlet]="column.headerTemplate"\n                  [ngTemplateOutletContext]="{column: column}"></span>\n            <span class="column-sort-icon" *ngIf="column.sortable">\n               <i [hide]="column.property === sortBy" class="fa fa-sort column-sortable-icon"\n                  aria-hidden="true"></i>\n               <i [hide]="column.property !== sortBy" class="fa"\n                  [ngClass]="{\'fa-sort-asc\': sortAsc, \'fa-sort-desc\': !sortAsc}" aria-hidden="true"></i>\n            </span>\n            <span *ngIf="column.resizable" class="column-resize-handle"\n                  (mousedown)="resizeColumnStart($event, column, th)"></span>\n          </span>\n        </th>\n      </tr>\n      </thead>\n      <tbody *ngFor="let item of items; let index=index" class="data-table-row-wrapper"\n             dataTableRow #row [item]="item" [index]="index" (selectedChange)="onRowSelectChanged(row)">\n      </tbody>\n      <tbody *ngIf="itemCount === 0 && noDataMessage">\n        <tr>\n          <td [attr.colspan]="columnCount">{{ noDataMessage }}</td>\n        </tr>\n      </tbody>\n      <tbody class="substitute-rows" *ngIf="pagination && substituteRows">\n      <tr *ngFor="let item of substituteItems, let index = index"\n          [class.row-odd]="(index + items.length) % 2 === 0"\n          [class.row-even]="(index + items.length) % 2 === 1" role="presentation">\n        <td [hide]="!expandColumnVisible"></td>\n        <td [hide]="!indexColumnVisible">&nbsp;</td>\n        <td [hide]="!selectColumnVisible"></td>\n        <td *ngFor="let column of columns" [hide]="!column.visible">\n      </tr>\n      </tbody>\n    </table>\n    <div class="busy" *ngIf="showReloading && reloading">\n      <i><i class="fa fa-spin fa-cog fa-2x"></i></i>\n    </div>\n  </div>\n\n  <data-table-pagination *ngIf="pagination" [limits]="pageLimits"></data-table-pagination>\n</div>\n',styles:[":host /deep/ .data-table.table>tbody+tbody{border-top:none}:host /deep/ .data-table.table td{vertical-align:middle}:host /deep/ .data-table>tbody>tr>td,:host /deep/ .data-table>thead>tr>th{overflow:hidden}:host /deep/ .data-table>thead>tr>td{border-bottom:2px solid #dee2e6}:host /deep/ .row-odd{background-color:#f6f6f6}.data-table .substitute-rows>tr:hover,:host /deep/ .data-table .data-table-row:hover{background-color:#ececec}.data-table{box-shadow:0 0 15px #ececec}.column-header{position:relative}.expand-column-header{width:50px}.select-column-header{width:50px;text-align:center}.index-column-header{width:40px}.column-header.sortable button{box-sizing:content-box;background:0 0;border:0;color:inherit;cursor:pointer;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-appearance:button;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;text-align:left}.column-header .column-sort-icon{margin-left:8px}.column-header.resizable .column-sort-icon{margin-right:8px}.column-header .column-sort-icon .column-sortable-icon{color:#d3d3d3}.column-header .column-resize-handle{position:absolute;top:0;right:0;margin:0;padding:0;width:8px;height:100%;cursor:col-resize}.data-table-box{position:relative}.busy{position:absolute;z-index:1;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.25)}.busy>i{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"]})],t)}(),v=function(){function t(t,e){this.dataTable=t,this.elemRef=e,this.columnSelectorOpen=!1}return t.prototype.onClickHandler=function(t){this.elemRef.nativeElement.contains(t.target)||(this.columnSelectorOpen=!1)},t.prototype.onKeyUpHandler=function(t){(27===t.keyCode||9===t.keyCode&&!this.elemRef.nativeElement.contains(t.target))&&(this.columnSelectorOpen=!1)},t.prototype.onChange=function(t){var e=t.target.checked,n={column_name:t.target.parentElement.textContent.trim(),title:this.dataTable.title};this.dataTable.visibleColumnsChange.emit(t),this.dataTable.columnSelectorNotification=(e?this.dataTable.labels.headerColumnSelectorAdded:this.dataTable.labels.headerColumnSelectorRemoved).replace("{column_name}",n.column_name).replace("{title}",n.title)},t.ctorParameters=function(){return[{type:y,decorators:[{type:e.Inject,args:[e.forwardRef((function(){return y}))]}]},{type:e.ElementRef}]},s([e.HostListener("document:click",["$event"])],t.prototype,"onClickHandler",null),s([e.HostListener("document:keyup",["$event"])],t.prototype,"onKeyUpHandler",null),t=s([e.Component({selector:"data-table-header",template:'<div class="data-table-header">\n  <p class="h4 title" *ngIf="dataTable.showTitle" [textContent]="dataTable.title"></p>\n  <div class="button-panel">\n    <button type="button" class="btn btn-default btn-sm refresh-button"\n            (click)="dataTable.reloadItems()">\n      <i class="fa fa-refresh" aria-hidden="true"></i>\n      <span class="sr-only">{{ dataTable.labels.headerReload.replace(\'{title}\', dataTable.title) }}</span>\n    </button>\n    <button type="button" class="btn btn-default btn-sm column-selector-button" [class.active]="columnSelectorOpen"\n            [attr.aria-haspopup]="true"\n            [attr.aria-expanded]="columnSelectorOpen"\n            (click)="columnSelectorOpen = !columnSelectorOpen;">\n      <i class="fa fa-list" aria-hidden="true"></i>\n      <span class="sr-only">{{ dataTable.labels.headerColumnSelector.replace(\'{title}\', dataTable.title) }}</span>\n    </button>\n    <div class="column-selector-wrapper">\n      <div *ngIf="columnSelectorOpen" class="column-selector-box panel panel-default">\n        <ul class="list-group list-group-flush">\n          <li *ngIf="dataTable.expandableRows" class="list-group-item column-selector-column checkbox">\n            <label class="d-flex align-items-center">\n              <input type="checkbox" [(ngModel)]="dataTable.expandColumnVisible" (change)="onChange($event)" [attr.aria-controls]="dataTable.id"/>\n              <span [textContent]="dataTable.labels.expandColumn"></span>\n            </label>\n          </li>\n          <li *ngIf="dataTable.indexColumn" class="list-group-item column-selector-column checkbox">\n            <label class="d-flex align-items-center">\n              <input type="checkbox" [(ngModel)]="dataTable.indexColumnVisible" (change)="onChange($event)" [attr.aria-controls]="dataTable.id"/>\n              <span [textContent]="dataTable.labels.indexColumn"></span>\n            </label>\n          </li>\n          <li *ngIf="dataTable.selectColumn" class="list-group-item column-selector-column checkbox">\n            <label class="d-flex align-items-center">\n              <input type="checkbox" [(ngModel)]="dataTable.selectColumnVisible" (change)="onChange($event)" [attr.aria-controls]="dataTable.id"/>\n              <span [textContent]="dataTable.labels.selectColumn"></span>\n            </label>\n          </li>\n          <ng-template ngFor let-item let-i="index" [ngForOf]="dataTable.columns">\n            <li class="list-group-item column-selector-column checkbox"\n                *ngIf="dataTable.primaryColumn !== item.property">\n              <label class="d-flex align-items-center">\n                <input type="checkbox" [(ngModel)]="item.visible" (change)="onChange($event)" [attr.aria-controls]="dataTable.id"/>\n                <span [textContent]="item.header"></span>\n              </label>\n            </li>\n          </ng-template>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[".data-table-header{min-height:25px;margin-bottom:10px}.title{display:inline-block;margin:5px 0 0 5px}.button-panel{float:right}.button-panel button{outline:0!important}.column-selector-wrapper{position:relative}.column-selector-box{box-shadow:0 0 10px #d3d3d3;background:#fff;width:150px;padding:10px;position:absolute;right:0;top:1px;z-index:1060}.column-selector-box .list-group-item.column-selector-column{padding:.5rem .25rem}.column-selector-box .list-group-item.column-selector-column label{margin-bottom:0}.column-selector-box .list-group-item.column-selector-column input{margin-right:4px;font-style:italic}"]}),r(0,e.Inject(e.forwardRef((function(){return y}))))],t)}(),C=0,x=function(){function t(t){this.dataTable=t,this.id="pagination-"+C++,this.Math=Math}return t.prototype.pageBack=function(){this.dataTable.offset-=Math.min(this.dataTable.limit,this.dataTable.offset),this.dataTable.offset<=0&&this.pageInput.nativeElement.focus()},t.prototype.pageForward=function(){this.dataTable.offset+=this.dataTable.limit,this.dataTable.offset+this.dataTable.limit>=this.dataTable.itemCount&&this.pageInput.nativeElement.focus()},t.prototype.pageFirst=function(){this.dataTable.offset=0,this.pageInput.nativeElement.focus()},t.prototype.pageLast=function(){this.dataTable.offset=(this.maxPage-1)*this.dataTable.limit,this.dataTable.offset+this.dataTable.limit>=this.dataTable.itemCount&&this.pageInput.nativeElement.focus()},Object.defineProperty(t.prototype,"maxPage",{get:function(){return Math.ceil(this.dataTable.itemCount/this.dataTable.limit)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this.dataTable.limit},set:function(t){this.dataTable.limit=+t,this.page=1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.dataTable.page},set:function(t){this.dataTable.page=+t},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){var e=+t.target.value;e!==this.page&&(this.page=t.target.value>this.maxPage?this.maxPage:e<1?1:e,t.target.value=this.page)},t.ctorParameters=function(){return[{type:y,decorators:[{type:e.Inject,args:[e.forwardRef((function(){return y}))]}]}]},s([e.ViewChild("pageInput",{static:!0})],t.prototype,"pageInput",void 0),s([e.Input()],t.prototype,"limits",void 0),t=s([e.Component({selector:"data-table-pagination",template:'<div class="row">\n  <div class="pagination-range col">\n    <span [textContent]="dataTable.labels.paginationText\n        .replace(\'{from}\', this.Math.ceil(dataTable.itemCount / dataTable.limit) !== 0 ? dataTable.offset + 1 + \'\' : \'0\')\n        .replace(\'{to}\', this.Math.min(dataTable.offset + dataTable.limit, dataTable.itemCount) + \'\')\n        .replace(\'{total}\', dataTable.itemCount + \'\')"></span>\n  </div>\n</div>\n<div class="row">\n  <div class="pagination-limit col-md-3">\n    <div class="input-group">\n      <div class="input-group-prepend">\n        <label [attr.for]="id + \'-page-limit\'" class="input-group-text" [textContent]="dataTable.labels.paginationLimit"></label>\n      </div>\n      <select [id]="id + \'-page-limit\'" class="form-control" [(ngModel)]="limit" [disabled]="dataTable.itemCount === 0">\n        <option *ngFor="let l of limits" [value]="l">{{ l }}</option>\n      </select>\n    </div>\n  </div>\n  <div class="pagination-pages offset-md-3 col-md-6">\n    <div class="pagination-page">\n      <div class="input-group">\n        <button [disabled]="dataTable.offset <= 0"\n                (click)="pageFirst()"\n                class="btn btn-default pagination-firstpage"\n                [title]="dataTable.labels.firstPage"\n                [attr.aria-controls]="dataTable.id">\n          <i class="fa fa-angle-double-left" aria-hidden="true"></i>\n          <span class="sr-only">first page</span>\n        </button>\n        <button [disabled]="dataTable.offset <= 0"\n                (click)="pageBack()"\n                class="btn btn-default pagination-prevpage"\n                [title]="dataTable.labels.prevPage"\n                [attr.aria-controls]="dataTable.id">\n          <i class="fa fa-angle-left" aria-hidden="true"></i>\n          <span class="sr-only">previous page</span>\n        </button>\n\n        <div class="input-group-prepend d-sm-block d-none">\n          <label class="input-group-text" [attr.for]="id + \'-page-input\'">\n            {{ dataTable.labels.pageNumberLabel }}\n          </label>\n        </div>\n        <input #pageInput type="number"\n               [id]="id + \'-page-input\'"\n               class="form-control" min="1" step="1" max="{{maxPage}}"\n               [disabled]="dataTable.itemCount === 0"\n               [ngModel]="page"\n               (blur)="validate($event)"\n               (keyup.enter)="validate($event)"\n               (keyup.esc)="pageInput.value = page"\n               [title]="dataTable.labels.pageNumber + \' \' +\n                    dataTable.labels.pageNumberNofM.replace(\'{N}\', \'\'+page).replace(\'{M}\', \'\'+maxPage)"\n               [attr.aria-controls]="dataTable.id"/>\n        <div class="input-group-append">\n            <span class="input-group-text">\n              {{ dataTable.labels.paginationTotalPages }}&nbsp;{{ dataTable.lastPage }}\n            </span>\n        </div>\n\n        <button [disabled]="(dataTable.offset + dataTable.limit) >= dataTable.itemCount"\n                (click)="pageForward()"\n                class="btn btn-default pagination-nextpage"\n                [title]="dataTable.labels.nextPage"\n                [attr.aria-controls]="dataTable.id">\n          <i class="fa fa-angle-right" aria-hidden="true"></i>\n          <span class="sr-only">next page</span>\n        </button>\n        <button [disabled]="(dataTable.offset + dataTable.limit) >= dataTable.itemCount"\n                (click)="pageLast()"\n                class="btn btn-default pagination-lastpage"\n                [title]="dataTable.labels.lastPage"\n                [attr.aria-controls]="dataTable.id">\n          <i class="fa fa-angle-double-right" aria-hidden="true"></i>\n          <span class="sr-only">last page</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[".pagination-controllers select{text-align:right}.pagination-box button{outline:0!important}"]}),r(0,e.Inject(e.forwardRef((function(){return y}))))],t)}(),T=function(){function t(){}var i;return i=t,t.forRoot=function(){return{ngModule:i,providers:[]}},t=i=s([e.NgModule({declarations:[y,h,b,x,v,u,p,d],imports:[n.CommonModule,o.FormsModule],exports:[y,h]})],t)}();t.DataTable=y,t.DataTableColumn=h,t.DataTableHeader=v,t.DataTablePagination=x,t.DataTableResource=m,t.DataTableRow=b,t.NgxTableModule=T,t.ɵa=u,t.ɵb=p,t.ɵc=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=popetech-ngx-table.umd.min.js.map